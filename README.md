# n8n - –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è —Ä–∞–±–æ—á–∏—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤

–ü—Ä–æ–µ–∫—Ç –¥–ª—è –∑–∞–ø—É—Å–∫–∞ n8n (–∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ —Ä–∞–±–æ—á–∏—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤) —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Docker Compose –∏ PostgreSQL.

## üìã –û–ø–∏—Å–∞–Ω–∏–µ

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –¥–ª—è –∑–∞–ø—É—Å–∫–∞ n8n –≤ Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞—Ö —Å PostgreSQL –≤ –∫–∞—á–µ—Å—Ç–≤–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö. –ù–∞—Å—Ç—Ä–æ–µ–Ω–æ –¥–ª—è —Ä–∞–±–æ—Ç—ã –≤ –ª–æ–∫–∞–ª—å–Ω–æ–π —Å–µ—Ç–∏ –ø–æ HTTP.

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Docker
- Docker Compose

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

1. **–ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –∏–ª–∏ —Å–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ñ–∞–π–ª—ã –ø—Ä–æ–µ–∫—Ç–∞**

2. **–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` –Ω–∞ –æ—Å–Ω–æ–≤–µ `.env.example`:**
   ```bash
   cp .env.example .env
   ```

3. **–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ —Ñ–∞–π–ª `.env` –∏ –∏–∑–º–µ–Ω–∏—Ç–µ –ø–∞—Ä–æ–ª–∏:**
   - `POSTGRES_PASSWORD` - –ø–∞—Ä–æ–ª—å –¥–ª—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö PostgreSQL
   - `DB_POSTGRESDB_PASSWORD` - –ø–∞—Ä–æ–ª—å –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è n8n –∫ –ë–î (–¥–æ–ª–∂–µ–Ω —Å–æ–≤–ø–∞–¥–∞—Ç—å —Å POSTGRES_PASSWORD)
   - `N8N_BASIC_AUTH_PASSWORD` - –ø–∞—Ä–æ–ª—å –¥–ª—è –≤—Ö–æ–¥–∞ –≤ n8n
   - `WEBHOOK_URL` - URL –¥–ª—è webhook'–æ–≤ (–∑–∞–º–µ–Ω–∏—Ç–µ `localhost` –Ω–∞ IP –≤–∞—à–µ–≥–æ –∫–æ–º–ø—å—é—Ç–µ—Ä–∞ –≤ –ª–æ–∫–∞–ª—å–Ω–æ–π —Å–µ—Ç–∏)

4. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã:**
   ```bash
   docker compose up -d
   ```

5. **–û—Ç–∫—Ä–æ–π—Ç–µ n8n –≤ –±—Ä–∞—É–∑–µ—Ä–µ:**
   - –õ–æ–∫–∞–ª—å–Ω–æ: `http://localhost:5678`
   - –í –ª–æ–∫–∞–ª—å–Ω–æ–π —Å–µ—Ç–∏: `http://<–≤–∞—à-ip>:5678`

## üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–í—Å–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ —Ñ–∞–π–ª–µ `.env`. –û—Å–Ω–æ–≤–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:

#### PostgreSQL
- `POSTGRES_DB` - –∏–º—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- `POSTGRES_USER` - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- `POSTGRES_PASSWORD` - –ø–∞—Ä–æ–ª—å –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

#### n8n
- `DB_TYPE` - —Ç–∏–ø –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö (postgresdb)
- `DB_POSTGRESDB_HOST` - —Ö–æ—Å—Ç –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö (postgres)
- `DB_POSTGRESDB_PORT` - –ø–æ—Ä—Ç –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö (5432)
- `DB_POSTGRESDB_DATABASE` - –∏–º—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- `DB_POSTGRESDB_USER` - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
- `DB_POSTGRESDB_PASSWORD` - –ø–∞—Ä–æ–ª—å –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
- `N8N_BASIC_AUTH_ACTIVE` - –≤–∫–ª—é—á–∏—Ç—å –±–∞–∑–æ–≤—É—é –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é (true/false)
- `N8N_BASIC_AUTH_USER` - –ª–æ–≥–∏–Ω –¥–ª—è –≤—Ö–æ–¥–∞ –≤ n8n
- `N8N_BASIC_AUTH_PASSWORD` - –ø–∞—Ä–æ–ª—å –¥–ª—è –≤—Ö–æ–¥–∞ –≤ n8n
- `N8N_HOST` - —Ö–æ—Å—Ç –¥–ª—è –ø—Ä–æ—Å–ª—É—à–∏–≤–∞–Ω–∏—è (0.0.0.0 –¥–ª—è –≤—Å–µ—Ö –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤)
- `N8N_PORT` - –ø–æ—Ä—Ç n8n (5678)
- `N8N_PROTOCOL` - –ø—Ä–æ—Ç–æ–∫–æ–ª (http/https)
- `WEBHOOK_URL` - –±–∞–∑–æ–≤—ã–π URL –¥–ª—è webhook'–æ–≤
- `GENERIC_TIMEZONE` - —á–∞—Å–æ–≤–æ–π –ø–æ—è—Å (Europe/Moscow)
- `N8N_SECURE_COOKIE` - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –±–µ–∑–æ–ø–∞—Å–Ω—ã–µ cookies (false –¥–ª—è HTTP)

### –ü–æ—Ä—Ç—ã

- **5678** - –ø–æ—Ä—Ç n8n (–ø—Ä–æ–±—Ä–æ—à–µ–Ω –Ω–∞—Ä—É–∂—É)
- **5432** - –ø–æ—Ä—Ç PostgreSQL (—Ç–æ–ª—å–∫–æ –≤–Ω—É—Ç—Ä–∏ Docker —Å–µ—Ç–∏)

### Volumes

- `postgres_data` - –¥–∞–Ω–Ω—ã–µ PostgreSQL
- `n8n_data` - –¥–∞–Ω–Ω—ã–µ n8n (workflows, credentials –∏ —Ç.–¥.)

## üìù –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
docker compose up -d

# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
docker compose stop

# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏ —É–¥–∞–ª–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
docker compose down

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
docker compose restart

# –ü–µ—Ä–µ—Å–æ–∑–¥–∞—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã (—Å –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ–º –Ω–æ–≤—ã—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫)
docker compose down && docker compose up -d
```

### –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤

```bash
# –õ–æ–≥–∏ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
docker compose logs -f

# –õ–æ–≥–∏ —Ç–æ–ª—å–∫–æ n8n
docker compose logs -f n8n

# –õ–æ–≥–∏ —Ç–æ–ª—å–∫–æ PostgreSQL
docker compose logs -f postgres
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞

```bash
# –°—Ç–∞—Ç—É—Å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
docker compose ps

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ
docker exec n8n env | grep N8N_
```

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

‚ö†Ô∏è **–í–∞–∂–Ω–æ –¥–ª—è production:**

1. **–ò–∑–º–µ–Ω–∏—Ç–µ –≤—Å–µ –ø–∞—Ä–æ–ª–∏** –≤ —Ñ–∞–π–ª–µ `.env` –Ω–∞ –±–µ–∑–æ–ø–∞—Å–Ω—ã–µ
2. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ HTTPS/TLS** –≤–º–µ—Å—Ç–æ HTTP
3. **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ `N8N_SECURE_COOKIE=true`** –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ HTTPS
4. **–î–æ–±–∞–≤—å—Ç–µ `.env` –≤ `.gitignore`**, —á—Ç–æ–±—ã –Ω–µ –∫–æ–º–º–∏—Ç–∏—Ç—å –ø–∞—Ä–æ–ª–∏ –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
5. **–û–≥—Ä–∞–Ω–∏—á—å—Ç–µ –¥–æ—Å—Ç—É–ø** –∫ –ø–æ—Ä—Ç—É 5678 —á–µ—Ä–µ–∑ —Ñ–∞–π—Ä–≤–æ–ª–ª

## üåê –î–æ—Å—Ç—É–ø –≤ –ª–æ–∫–∞–ª—å–Ω–æ–π —Å–µ—Ç–∏

–î–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ n8n –∏–∑ –ª–æ–∫–∞–ª—å–Ω–æ–π —Å–µ—Ç–∏:

1. –£–∑–Ω–∞–π—Ç–µ IP –∞–¥—Ä–µ—Å –≤–∞—à–µ–≥–æ –∫–æ–º–ø—å—é—Ç–µ—Ä–∞:
   ```bash
   hostname -I | awk '{print $1}'
   ```

2. –û–±–Ω–æ–≤–∏—Ç–µ `WEBHOOK_URL` –≤ `.env`:
   ```
   WEBHOOK_URL=http://<–≤–∞—à-ip>:5678/
   ```

3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã:
   ```bash
   docker compose restart n8n
   ```

4. –û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ: `http://<–≤–∞—à-ip>:5678`

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- [n8n Documentation](https://docs.n8n.io/)
- [Docker Documentation](https://docs.docker.com/)
- [Docker Compose Documentation](https://docs.docker.com/compose/)
- [Telegram Bot API](https://core.telegram.org/bots/api)

## üêõ –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –û—à–∏–±–∫–∞ "secure cookie"

–ï—Å–ª–∏ –≤–∏–¥–∏—Ç–µ –æ—à–∏–±–∫—É –æ –±–µ–∑–æ–ø–∞—Å–Ω—ã—Ö cookies:
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ `N8N_SECURE_COOKIE=false` –≤ `.env`
- –ü–µ—Ä–µ—Å–æ–∑–¥–∞–π—Ç–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã: `docker compose down && docker compose up -d`
- –û—á–∏—Å—Ç–∏—Ç–µ –∫–µ—à –±—Ä–∞—É–∑–µ—Ä–∞ (Ctrl+Shift+R)

### –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏: `docker compose logs n8n`
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–æ—Ä—Ç 5678 –Ω–µ –∑–∞–Ω—è—Ç: `netstat -tuln | grep 5678`
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–∞–π–ª `.env` –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –≤—Å–µ—Ö –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö

### –ü—Ä–æ–±–ª–µ–º—ã —Å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ–º –∫ –ë–î

1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ PostgreSQL –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∑–∞–ø—É—â–µ–Ω: `docker compose ps`
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –ø–∞—Ä–æ–ª–∏ –≤ `.env` —Å–æ–≤–ø–∞–¥–∞—é—Ç –¥–ª—è PostgreSQL –∏ n8n
3. –î–æ–∂–¥–∏—Ç–µ—Å—å –ø–æ–ª–Ω–æ–π –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –ë–î (healthcheck –¥–æ–ª–∂–µ–Ω –ø–æ–∫–∞–∑–∞—Ç—å "healthy")

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç n8n, –∫–æ—Ç–æ—Ä—ã–π —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è–µ—Ç—Å—è –ø–æ–¥ –ª–∏—Ü–µ–Ω–∑–∏–µ–π [Sustainable Use License](https://github.com/n8n-io/n8n/blob/master/LICENSE.md).

